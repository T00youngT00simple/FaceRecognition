## 基于树莓派的智能人脸识别考勤系统研究
### 1.项目需求分析  
#### 1.1 总体设计需求
 后端选择采用python语言开发，合适的人脸识别算法等作为支持，在后端树莓派上需要完成人脸信息的录入以及完成人脸签到。在后端上就涉及到几个关键问题，在录入以及签到的过程中如何建立视频流获取录入学生的人脸，如何识别视频流中的人脸生物特征，对识别后的人脸生物特征如何进行存储，如何进行识别，识别后该以怎样的方式进行存储。在前端上主要涉及到数据库的设计。后端人脸特征签到应该入库怎样的信息，前端显示怎样的数据库信息以及完成对所显示表的增删改查。  
 同时作为一款签到管理系统应该具备请假功能，而请假功能的实现需要建立怎样的数据库，请假功能的审批还意味着需要将前端的学生登录以及管理员权限分离，在后端建立新的人脸信息时需要同时创建学生信息表，对于人脸特征识别图片又该怎样存储。
### 2.详细设计需求
#### 2.1后端设计需求
 对于视频流的建立可选用usb摄像头或者树莓派官版摄像头，视频流的建立帧数应该能满足对视频中出现的人脸特征识别图像的截取，不能过卡而影响数据的采集，结合后端的ui需做到释放自如，为满足视频流对人脸特征上进行标注同样提出了帧数的需求。
 建表来存储员工信息和签到信息，每次新建录入员工面部信息时，需获取作为学生信息标识的信息，同时应建表考虑该学生信息的存储方式，并且在进行信息录入的需对已有的学生信息进行查重。
 在人脸录入时应考虑到同时录入的人脸数，考虑到通过机器学习训练模型每次只可键入一个关键id作为同一组人脸检测的标示，应将同时录入人数限制在一人。在录入过程中应该做到对人脸进行检测以及识别，识别人脸特征图像是否已处于训练模型，防止人脸重复录入出现同一人脸特征信息拥有两个id导致签到过程中出现问题的情况。辅助人脸录入以及检测的进行，一旦识别到人脸后便自动捕获截图，保存截图时更应该考虑需将每张人脸特征截图按照一定的命名规则进行存储，当保存截图数目超过某一规定值，便将获取的截图组以及相对应的id作为用户数据训练识别器。

### 3.详细设计
#### 3.1人脸信息采集及识别
 藉由wxpython依次弹出两个gettext对话框与用户交互获得用户输入的用户名称以及用户ID，而在用户输入时需要作出查重操作。透过opencv建立视频流，这里就涉及一个问题，按照常规的opencv建立视频流的方法获得一个摄像头对象，在一个死循环中截取图像并对图像按照需求做一系列如翻转，灰度变换等操作。最后透过imwait以及imshow函数显示一个视频流对象窗口。而在本程序的设计人脸录入以及刷脸签到这两个需要建立视频流的功能键都建立了新的UI窗口来细化了功能分类。我们应将视频显示限制的在这两项功能所创建的子窗口中，该需求的设计思想为将循环中每一张截取图像通过wxpython的Bitmap显示在子窗口中，即在ui上刷新显示while循环中截取图像的方法获得类视频流。
 基于opencv的人脸检测方式最常见的使用的人脸检测方式是使用「Haar 级联分类器」。使用基于 Haar 特征的级联分类器的目标检测是 Paul Viola 和 Michael Jones 2001 年在论文《Rapid Object Detection using a Boosted Cascade of Simple Features》中提出的一种高效目标检测方法。这种机器学习方法基于大量正面、负面图像训练级联函数，然后用于检测其他图像中的对象。这里，我们将用它进行人脸识别。最初，该算法需要大量正类图像（人脸图像）和负类图像（不带人脸的图像）来训练分类器。然后我们需要从中提取特征来进行检测视频流图像中是否为人脸。现在使用的级联器为opencv所提供的人脸检测弱级联分类器lbpcascade_frontalface.xml进行人脸检测，强分类器分类正确率较高，但是较难获得。只要样本充足，弱学习可以通过一定的组合获得任意精度的强学习，而级联分类器就是 N个弱分类器 以级联的方式，从简单到复杂逐步串联而成。
 树莓派本地的特征记录抽取用户数据训练opencv识别器，训练的基本流程为对每张图像进行灰度处理，图像中的人脸特征处理。用户键入的ID与人脸特征作为训练识别器的唯二参数。若在训练流程中未能检测出人脸特征则依然需删除该条记录所保存的10张图片，并一提示框提示，在新的录入过程中输入姓名与ID的重复检测是基于本地已保存图片的命名。识别器将会被录入过程以及签到过程使用用以检测是否重复录入以及识别人脸完成签到。
#### 3.2人脸信息采集及识别
